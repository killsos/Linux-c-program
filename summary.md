## 1 基础

1. 主版本号   次版本号  修正号

    次版本号 偶数是稳定版  

    次版本号 奇数是非稳定版

2. Linux与Unix关系

  * Unix系统与硬件配套  Linux是跨平台的

  * Unix是付费的  Linux是免费

3. linux三个方向

  * 服务器

  * 嵌入式  

  * 桌面应用

3. c语言的缺点

  * 容易内存泄漏

  * 类型检查机制较弱

  * 代码冗余处理不够


## 2 控制结构

```c

gcc 程序名 -o 可执行程序名

```

#### 1. goto

#### 2. if (condition) else

```c
if (condition) {

  printf();

} else {

  printf();
}

```

#### 3. 短路计算

  逻辑运算符: &&  ||  !

  && 如果第一个表达式为0  第二个表达式不进行运算

  || 如果第一个表达式为1  第二个表达式不进行运算


#### 4. while

```c
while() {

}
```

#### 5. do while

```c
do {
  
} while()
```

#### 6. for

```c
for() {
  
}
```

#### 7. switch

```c
switch(score) {
  case target : 
    break;
  
  default:

}
```

在时间方面 switch语句的执行速度比ifelse语句要快 但是在程序执行所占用的空间方面 switch语句需要维护一张调资表  

#### 8. 优化控制结构

表达式的优化是最基本优化  

使用简介高效的表达式可以大幅度提高程序的效率  

* 表达式优化  使用替换程序中乘除法  

在程序执行过程中 加减法操作是计算机最喜欢的操作 

其执行时间只占用1个时钟周期 是最快速的操作  

位运算与移位操作的执行速度和加减法接近加减操作  

乘法的执行时间要长一些  大概在5~6个时钟周期内完成  

除法的执行速度最慢 大约需要50个时钟周期才能完成一个除法操作  

移位操作是一个很好选择 数据左移移位相当于乘以2 右移一位相当于除以2  

可以使用移位替换乘除法  

* 表达式优化  常量折叠  

```c

int a = 10;

a = a + 2 * 17 + 16;

// 优化为

a  =  a + 40;

```


* 表达式优化  使用数学公式

c语言中的变量需要保存在内存中  相对于CPU内部的寄存器操作   
访问内存所消耗的时间是很大  

因此减少内存访问也是提高程序运行效率的方法之一  

```c
 x = x + 1;
```

该语句在执行过程中编译器认为赋值符号=两边的操作数不是一个操作数  

而是两个   尽管用户知道这两个变量实际上一个 这时该语句的执行过程分为三步   

* 寻找存储右边操作数x的内存单元的地址 然后读取其值 到 寄存器

* 将右x的值 + 1

* 寻找存储左边操作数x的内存单元的地址

* 根据左边x的内存地址 将计算后的值 写到这个地址

```c
 x += 1;
```

编译器会认为赋值等号两边的操作数是同一个操作数  所以执行过程分两步   

* 寻找存储操作数x的内存单元的地址 然后读取其值 到 寄存器

* 将x的值 + 1

* 根据左边x的内存地址 将计算后的值 写到这个地址   



* 分支优化  改变判断顺序  

* iflese

* switch 

* 循环优化  一次性计算

在循环中有些计算是多次不变的 这种计算称为一次性计算  

由于一次性计算在循环执行期间不改变计算的结果  这时在循环外   

计算该表达式和在循环内执行的效果是一样  的

因此对于这种循环中的一次性计算 应当将其放置到循环外面  

```c
  int a[10];
  for(i = 0; i < 10; i++) 
  {
    len = 1;
    a[i] = i;
  }
```

优化   

```c
  int a[10];
  len = 1;

  for(i = 0; i < 10; i++) 
  {

    a[i] = i;
  }
```

## 3 函数

函数的本质是一段二进制可执行代码  

在翻译为汇编语言时  函数被翻译成为一段相对独立的汇编代码 并且使用函数名  

作为标号  表示此段代码入口 当程序中需要调用该函数时  只需要跳转到这个标号

处执行标号后面的函数代码就可以了   

函数本质是一段机器指令代码   

函数名的本质是一个标号  

该标号的值等于内存中存储函数代码的内存空间的首地址   

函数在调用时会使进程空间中的栈不断增长  

从当前进程空间中的栈顶的位置到函数保存返回地址的为 这块内存称为函数的栈帧   、

所有函数中定义的局部变量都存储在函数的栈帧上 

当函数结束调用时该块栈帧就消失了  

1. 变量的作用域和生命周期  

c语言中每一个变量都有自己的作用域和生命周期 

* 作用域 * 表示可以引用该变量的代码  

* 生命周期 * 表示变量的存储空间所保存的时间   

以生命周期来分类的话 变量分为 全局  和  局部


* 全局变量

也称为外部变量  是在函数外部定义的  因此不属于任何一个函数  

而是属于一个源程序文件   

其作用域从定义该变量的这一行开始   一直可以持续到定义该变量的源程序文件的结束  

在该区间内所有的函数都可以引用该变量  

* 局部变量

称为内部变量 其定义在函数或者复合语句的内部  其作用域仅限于函数或者复合语句内   
离开该函数或者复合语句后就无法再引用该变量

变量的作用域实际上是由变量的生命周期来决定的    

局部变量存储在函数的栈帧上  

全局变量存储在固定的存储区   

* 变量的初始值

全局变量 如果不赋值  初始值是0   

局部变量 如果不赋值  是使用其占用的内存空间原有的值 所以是一个随机值   

局部变量不进行初始值  是很危险  


2. 函数的优化  

一个函数调用的主要步骤4步:

* 函数调用需要将参数压入堆栈

* 函数调用需要保存寄存器的值

* 函数调用需要保存返回地址

* 函数调用会造成跳转  


由于函数调用耗费时间  因此在程序执行过程中应当减少函数的调用   

这样才能提高程序的执行速度    

12.c   与   13.c

12中调用3次func()函数调用  而13中调用一次func()函数调用   

3. 变量存储优化

c语言程序中的局部变量存储在栈上  全局变量存储在数据段上  

由于存储位置的不同导致二者生命周期的不同   

全局变量的生命周期是整个程序  

局部变量的生命期仅在定义局部变量的函数结束调用后就结束了    

对于在程序中调用频率很高的局部变量  编译器会自动将其存储在寄存器中   

因为全局变量需要在整个程序运行的过程中一直存在   

如果全局变量存储在寄存器中的话  

那么在整个程序的执行过程中 该寄存器都将无法存储临时变量或者中间值了   

这对于寄存器资源稀少的计算机来说是不能接受的 程序的运行效率也会大打折扣   

因此全局变量一定存储在数据段上  也就是存储到内存中   

因为计算过程中访问内存的时间要远超过CPU的计算时间  

所以尽量减少内存的访问是一个提高程序执行速度的好方法   

14.c   15.c

* cpu 向 内存  发送i的地址

* 内存 向 cpu  返回i的值

* cpu将i的值递增  

* cpu 向 内存  写入i的值

## 4 变量的存储类别 

1. 存储类别

* auto 自动变量 默认的存储类别

根据变量定义的位置决定变量的生命期和作用域  

如果变量定义在任何一个函数的外面  该变量就是一个全局变量  

如果变量定义在函数的内部 则是局部变量  

在c语言中 如果忽略变量的存储类别  

编译器会认为该变量的存储类别为auto   

这时编译器会自动为用户决定改变量应当存储的位置和性质   

* register 寄存器变量  

此类变量会被优先分配寄存器  通常作为循环因子的变量会被分配寄存器  

* extern 外部变量  全局变量

该关键字用来扩展全局变量的作用域  

扩展的范围是从使用extern变量出现开始到该文件结束  

由于全局变量不像局部变量那样会因为栈帧的消失而消失  

所以extern关键字所做的工作只是让其他文件中的程序可以引用该变量  

并不改变该变量的生命期  

* static 静态变量  

用于限制作用域 这种变量存储在数据段上  无论该变量是全局还是局部变量  


##### static变量的作用  改变变量的生命期 

static关键字的作用之一就是可以改变变量的作用域和生命期  

对于一个存储类别声明为static的全局变量而言  

其生命期并没有发生改变  

在整个程序执行过程中该变量一直存在  

但其作用域反有所减少   

只有本文件的函数可以引用该全局变量  

对于一个存储类别声明为static的局部变量而言  

其作用域没有改变  只有定义该局部变量的函数可以引用该变量  

但是其生命期发生了变化 在整个程序执行期间 该变量都存在

static局部变量一旦初始化 就不会再初始化   

##### 总结：

static 全局变量  

生命期：  在整个程序一直存在  

作用域：  只有本文件的函数可以引用  

static 局部变量  

生命期：  在整个程序一直存在  

作用域：  还是不变  只能在函数内部引用  

##### static变量的作用  实现封装和模块化设计

static变量的一个显著作用就是可以实现一个模块的封装  


stati使全局变量 只有在本文件内的函数可以引用   

因此在C语言中一个源程序文件就是一个**模块**


## 5 编写多文件的程序   链接的作用

当一个多个文件的程序编译结束后 需要由链接器将这些独立的模块链接为一个整体的可执行程序   

1. 链接多个文件

在一个文件中很可能需要引用另一个文件中定义的全局变量或者函数   

2. 链接时符号解析规则

* 声明表示告知编译器该变量的存在 此时是不为该变量分配存储空间

* 定义变量时不仅告知编译器该变量的存在 而且为该变量赋值  由于赋值 这时该变量的存储空间就被分配

* 当